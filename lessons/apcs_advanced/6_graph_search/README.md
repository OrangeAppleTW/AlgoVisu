### 動態標籤系統
- **核心特色**：樹結構固定，節點標籤按訪問順序動態顯示
- **教學優勢**：清楚展示BFS/DFS的探索過程，幫助學生理解演算法的步驟
- **使用方式**：
  - 初始狀態：只有S節點有標籤，其他節點為空白
  - 訪問過程：當BFS/DFS訪問節點時，自動分配A、B、C...標籤
  - 重置功能：清空所有動態標籤，回復初始狀態# L6: 圖形搜尋方法 - BFS 與 DFS

## 📋 課程概述

本課程實作了 **廣度優先搜尋 (BFS)** 和 **深度優先搜尋 (DFS)** 的完整視覺化教學工具，專為 APCS 進階班設計，幫助老師進行互動式教學。

## 🗂️ 檔案結構

```
6_graph_search/
├── index.html              # 主要課程頁面
├── test.html               # 測試頁面
├── README.md               # 說明文件
├── styles/
│   └── graph-search.css    # 專用樣式檔案
└── scripts/
    ├── graph-structure.js  # 圖形結構管理
    ├── bfs-algorithm.js    # BFS 演算法實作
    ├── dfs-algorithm.js    # DFS 演算法實作
    └── graph-search-ui.js  # UI 控制器
```

## 🎯 主要功能

### 1. BFS (廣度優先搜尋)
- **視覺化特色**：
  - 動態樹狀結構：初始只有S節點，按BFS訪問順序動態顯示A、B、C、D、E、F標籤
  - 即時 Queue 佇列狀態顯示
  - 訪問順序追蹤
  - 步驟說明和狀態提示

- **互動功能**：
  - 🎬 自動執行模式
  - 👆 單步執行模式  
  - 🔄 重置功能
  - 🎲 隨機圖形生成
  - ⚡ 速度調整

### 2. DFS (深度優先搜尋)
- **視覺化特色**：
  - 動態樹狀結構：初始只有S節點，按DFS訪問順序動態顯示A、B、C、D、E、F標籤
  - 即時 Stack 堆疊狀態顯示
  - 訪問順序追蹤
  - 步驟說明和狀態提示

- **互動功能**：
  - 🎬 自動執行模式
  - 👆 單步執行模式
  - 🔄 重置功能
  - 🎲 隨機圖形生成
  - ⚡ 速度調整

### 3. 比較與應用
- **詳細比較表格**：時間複雜度、空間複雜度、適用場景
- **實際應用案例**：最短路徑、拓撲排序、連通性檢測等
- **練習題目**：基礎和進階題目供學生練習

## 🎨 設計特色

### 黑白簡約風格
- 採用一致的黑白灰色調
- 清晰的狀態區分色彩
- 適合投影教學的高對比度設計

### 模組化架構
- **GraphStructure**: 圖形資料結構管理
- **BFSAlgorithm/DFSAlgorithm**: 演算法邏輯實作
- **SVGRenderer**: 圖形視覺化渲染
- **QueueRenderer/StackRenderer**: 資料結構顯示
- **GraphSearchUI**: 統一的用戶介面控制

### 響應式設計
- 支援桌面和行動裝置
- 彈性佈局適應不同螢幕尺寸

## 🛠️ 使用方法

### 教師教學使用

1. **開啟課程頁面**：
   ```
   /lessons/apcs_advanced/6_graph_search/index.html
   ```

2. **BFS 教學流程**：
   - 切換到 "廣度優先搜尋" 分頁
   - 講解 BFS 核心概念和 Queue 原理
   - 使用「單步執行」詳細說明每個步驟
   - 觀察佇列狀態變化和訪問順序
   - 比較不同圖形結構的 BFS 結果

3. **DFS 教學流程**：
   - 切換到 "深度優先搜尋" 分頁  
   - 講解 DFS 核心概念和 Stack 原理
   - 使用「單步執行」詳細說明每個步驟
   - 觀察堆疊狀態變化和訪問順序
   - 比較不同圖形結構的 DFS 結果

4. **比較教學**：
   - 切換到 "比較與應用" 分頁
   - 使用比較表格說明兩種演算法差異
   - 討論實際應用場景
   - 指派練習題目

### 學生自學使用

1. **基礎學習**：
   - 閱讀概念說明
   - 觀看自動執行演示
   - 嘗試單步執行理解細節

2. **深入實作**：
   - 查看程式碼範例 (Python/C++/虛擬碼)
   - 使用隨機圖形測試理解
   - 完成練習題目

## 🧪 測試與除錯

使用 `test.html` 進行功能測試：

```bash
# 開啟測試頁面
/lessons/apcs_advanced/6_graph_search/test.html
```

測試頁面功能：
- ✅ 圖形結構初始化測試
- ✅ BFS 演算法執行測試
- ✅ UI 互動功能測試
- ✅ 即時錯誤日誌顯示

## 🎓 教學重點

### BFS 重點
1. **FIFO 原則**：先進先出的佇列特性
2. **層次遍歷**：逐層探索的搜尋策略
3. **最短路徑**：在無權重圖中保證找到最短路徑
4. **空間複雜度**：需要較多記憶體存儲佇列

### DFS 重點  
1. **LIFO 原則**：後進先出的堆疊特性
2. **深度探索**：深入到底再回溯的搜尋策略
3. **路徑記錄**：適合需要記錄完整路徑的場景
4. **記憶體效率**：相對較少的記憶體使用

### 實作技巧
1. **狀態管理**：visited 集合避免重複訪問
2. **鄰接列表**：高效的圖形表示方法
3. **視覺化同步**：演算法執行與畫面更新的協調

## 🔧 自訂與擴展

### 修改預設圖形
編輯 `scripts/graph-structure.js` 中的 `createDefaultGraph()` 方法：

```javascript
createDefaultGraph() {
    return {
        nodes: [
            { id: 'A', x: 100, y: 100, label: 'A' },
            // 添加更多節點...
        ],
        edges: [
            { from: 'A', to: 'B' },
            // 添加更多邊線...
        ]
    };
}
```

### 調整視覺化樣式
修改 `styles/graph-search.css` 中的相關樣式：

```css
.node-circle.visited {
    fill: #your-color;
    stroke: #your-stroke-color;
}
```

### 添加新功能
在 `scripts/graph-search-ui.js` 中擴展 UI 控制器功能。

## 📚 相關資源

- **前置課程**：L5 二元樹與樹走訪
- **後續課程**：L7 貪心演算法
- **APCS 相關題型**：圖形遍歷、路徑搜尋
- **延伸學習**：Dijkstra 演算法、A* 搜尋

## 🐛 常見問題

**Q: 圖形沒有正確顯示？**
A: 檢查 SVG 元素是否正確載入，確認 CSS 樣式檔案路徑正確。

**Q: 演算法執行過快看不清楚？**  
A: 使用速度滑桿調整執行速度，或使用單步執行模式。

**Q: 佇列/堆疊顯示異常？**
A: 檢查 HTML 結構中的 `.queue-items` 或 `.stack-items` 元素是否存在。

**Q: 隨機圖形生成後無法連通？**
A: 隨機圖形生成器已包含最小生成樹邏輯，確保圖形連通性。

---

📧 如有問題或建議，請聯繫課程開發團隊。
🌟 持續更新中，歡迎回饋意見！