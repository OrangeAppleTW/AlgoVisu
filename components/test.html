<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°è¦½åˆ—çµ„ä»¶æ¸¬è©¦é é¢</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #f8f9fa;
        }

        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }

        .test-pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .test-fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .test-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .info-item {
            margin: 8px 0;
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            border-left: 3px solid #007bff;
        }

        .debug-log {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <!-- å°è¦½åˆ—å°‡ç”± JavaScript å‹•æ…‹è¼‰å…¥ -->

    <div class="test-container">
        <h1>ğŸ§ª å°è¦½åˆ—çµ„ä»¶æ¸¬è©¦é é¢</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ è‡ªå‹•æª¢æ¸¬çµæœ</h2>
            <div id="auto-tests">
                <div class="test-info">æ­£åœ¨åŸ·è¡Œè‡ªå‹•æª¢æ¸¬...</div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ç³»çµ±è³‡è¨Š</h2>
            <div id="system-info">
                <div class="info-item">æ­£åœ¨æ”¶é›†ç³»çµ±è³‡è¨Š...</div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ æ‰‹å‹•æ¸¬è©¦</h2>
            <p>è«‹æ‰‹å‹•æ¸¬è©¦ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
            <ul>
                <li>âœ“ å°è¦½åˆ—æ˜¯å¦æ­£ç¢ºé¡¯ç¤º</li>
                <li>âœ“ Logoåœ–ç‰‡æ˜¯å¦è¼‰å…¥</li>
                <li>âœ“ ä¸‹æ‹‰é¸å–®æ˜¯å¦èƒ½æ­£å¸¸å±•é–‹ï¼ˆæ»‘é¼ æ‡¸åœï¼‰</li>
                <li>âœ“ é€£çµæ˜¯å¦å¯ä»¥é»æ“Šä¸¦è·³è½‰</li>
                <li>âœ“ ç•¶å‰é é¢æ˜¯å¦æœ‰é«˜äº®é¡¯ç¤º</li>
            </ul>

            <div style="margin-top: 20px;">
                <button onclick="testNavbarFunctionality()">æ¸¬è©¦å°è¦½åˆ—åŠŸèƒ½</button>
                <button onclick="testPathResolution()">æ¸¬è©¦è·¯å¾‘è§£æ</button>
                <button onclick="clearDebugLog()">æ¸…é™¤æ—¥èªŒ</button>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ› é™¤éŒ¯æ—¥èªŒ</h2>
            <div id="debug-log" class="debug-log">ç­‰å¾…æ¸¬è©¦åŸ·è¡Œ...</div>
        </div>
    </div>

    <script src="../components/navbar-loader.js"></script>
    <script>
        let debugLog = '';
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            debugLog += `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            updateDebugLog();
        }

        function updateDebugLog() {
            document.getElementById('debug-log').textContent = debugLog;
        }

        function clearDebugLog() {
            debugLog = '';
            updateDebugLog();
        }

        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œè‡ªå‹•æ¸¬è©¦
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runAutomaticTests, 2000); // ç­‰å¾…å°è¦½åˆ—è¼‰å…¥
            displaySystemInfo();
        });

        function runAutomaticTests() {
            const results = [];
            
            // æ¸¬è©¦1ï¼šå°è¦½åˆ—æ˜¯å¦å­˜åœ¨
            const navbar = document.querySelector('.navbar');
            if (navbar) {
                results.push({ test: 'å°è¦½åˆ—DOMå…ƒç´ ', status: 'pass', message: 'å°è¦½åˆ—å·²æˆåŠŸè¼‰å…¥' });
                log('å°è¦½åˆ—DOMå…ƒç´ æª¢æ¸¬é€šé');
            } else {
                results.push({ test: 'å°è¦½åˆ—DOMå…ƒç´ ', status: 'fail', message: 'æ‰¾ä¸åˆ°å°è¦½åˆ—å…ƒç´ ' });
                log('å°è¦½åˆ—DOMå…ƒç´ æª¢æ¸¬å¤±æ•—', 'error');
            }

            // æ¸¬è©¦2ï¼šLogoåœ–ç‰‡æ˜¯å¦å­˜åœ¨
            const logo = document.querySelector('.logo-img');
            if (logo) {
                results.push({ test: 'Logoåœ–ç‰‡', status: 'pass', message: 'Logoåœ–ç‰‡å…ƒç´ å­˜åœ¨' });
                log('Logoåœ–ç‰‡æª¢æ¸¬é€šé');
                
                // æª¢æŸ¥åœ–ç‰‡æ˜¯å¦è¼‰å…¥æˆåŠŸ
                if (logo.complete && logo.naturalHeight > 0) {
                    results.push({ test: 'Logoåœ–ç‰‡è¼‰å…¥', status: 'pass', message: 'Logoåœ–ç‰‡è¼‰å…¥æˆåŠŸ' });
                    log('Logoåœ–ç‰‡è¼‰å…¥æˆåŠŸ');
                } else {
                    results.push({ test: 'Logoåœ–ç‰‡è¼‰å…¥', status: 'fail', message: 'Logoåœ–ç‰‡è¼‰å…¥å¤±æ•—' });
                    log('Logoåœ–ç‰‡è¼‰å…¥å¤±æ•—', 'error');
                }
            } else {
                results.push({ test: 'Logoåœ–ç‰‡', status: 'fail', message: 'æ‰¾ä¸åˆ°Logoåœ–ç‰‡å…ƒç´ ' });
                log('Logoåœ–ç‰‡æª¢æ¸¬å¤±æ•—', 'error');
            }

            // æ¸¬è©¦3ï¼šä¸‹æ‹‰é¸å–®æ˜¯å¦å­˜åœ¨
            const dropdowns = document.querySelectorAll('.nav-dropdown');
            if (dropdowns.length > 0) {
                results.push({ test: 'ä¸‹æ‹‰é¸å–®', status: 'pass', message: `ç™¼ç¾ ${dropdowns.length} å€‹ä¸‹æ‹‰é¸å–®` });
                log(`ä¸‹æ‹‰é¸å–®æª¢æ¸¬é€šéï¼Œå…± ${dropdowns.length} å€‹`);
            } else {
                results.push({ test: 'ä¸‹æ‹‰é¸å–®', status: 'fail', message: 'æ‰¾ä¸åˆ°ä¸‹æ‹‰é¸å–®å…ƒç´ ' });
                log('ä¸‹æ‹‰é¸å–®æª¢æ¸¬å¤±æ•—', 'error');
            }

            // æ¸¬è©¦4ï¼šé€£çµæ˜¯å¦å­˜åœ¨
            const links = document.querySelectorAll('.dropdown-link');
            if (links.length > 0) {
                results.push({ test: 'å°è¦½é€£çµ', status: 'pass', message: `ç™¼ç¾ ${links.length} å€‹å°è¦½é€£çµ` });
                log(`å°è¦½é€£çµæª¢æ¸¬é€šéï¼Œå…± ${links.length} å€‹`);
            } else {
                results.push({ test: 'å°è¦½é€£çµ', status: 'fail', message: 'æ‰¾ä¸åˆ°å°è¦½é€£çµ' });
                log('å°è¦½é€£çµæª¢æ¸¬å¤±æ•—', 'error');
            }

            // æ¸¬è©¦5ï¼šCSSæ¨£å¼æ˜¯å¦è¼‰å…¥
            const navbarStyles = window.getComputedStyle(navbar);
            if (navbarStyles.backgroundColor !== 'rgba(0, 0, 0, 0)') {
                results.push({ test: 'CSSæ¨£å¼', status: 'pass', message: 'å°è¦½åˆ—æ¨£å¼å·²æ­£ç¢ºè¼‰å…¥' });
                log('CSSæ¨£å¼æª¢æ¸¬é€šé');
            } else {
                results.push({ test: 'CSSæ¨£å¼', status: 'fail', message: 'å°è¦½åˆ—æ¨£å¼å¯èƒ½æœªæ­£ç¢ºè¼‰å…¥' });
                log('CSSæ¨£å¼æª¢æ¸¬å¤±æ•—', 'error');
            }

            displayTestResults(results);
        }

        function displayTestResults(results) {
            const container = document.getElementById('auto-tests');
            container.innerHTML = '';

            results.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result test-${result.status}`;
                div.innerHTML = `
                    <strong>${result.status === 'pass' ? 'âœ…' : 'âŒ'} ${result.test}:</strong> 
                    ${result.message}
                `;
                container.appendChild(div);
            });
        }

        function displaySystemInfo() {
            const info = [
                `ç•¶å‰URL: ${window.location.href}`,
                `é é¢è·¯å¾‘: ${window.location.pathname}`,
                `ç”¨æˆ¶ä»£ç†: ${navigator.userAgent}`,
                `è¢å¹•è§£æåº¦: ${screen.width}x${screen.height}`,
                `è¦–çª—å¤§å°: ${window.innerWidth}x${window.innerHeight}`,
                `æ–‡ä»¶æº–å‚™ç‹€æ…‹: ${document.readyState}`
            ];

            const container = document.getElementById('system-info');
            container.innerHTML = '';

            info.forEach(item => {
                const div = document.createElement('div');
                div.className = 'info-item';
                div.textContent = item;
                container.appendChild(div);
            });
        }

        function testNavbarFunctionality() {
            log('é–‹å§‹æ¸¬è©¦å°è¦½åˆ—åŠŸèƒ½');
            
            // æ¸¬è©¦ä¸‹æ‹‰é¸å–®hoveræ•ˆæœ
            const dropdowns = document.querySelectorAll('.nav-dropdown');
            dropdowns.forEach((dropdown, index) => {
                const menu = dropdown.querySelector('.dropdown-menu');
                if (menu) {
                    const isVisible = window.getComputedStyle(menu).display !== 'none';
                    log(`ä¸‹æ‹‰é¸å–® ${index + 1} åˆå§‹ç‹€æ…‹: ${isVisible ? 'é¡¯ç¤º' : 'éš±è—'}`);
                }
            });

            log('å°è¦½åˆ—åŠŸèƒ½æ¸¬è©¦å®Œæˆ');
        }

        function testPathResolution() {
            log('é–‹å§‹æ¸¬è©¦è·¯å¾‘è§£æ');
            
            const links = document.querySelectorAll('.dropdown-link, .navbar-logo');
            links.forEach((link, index) => {
                const href = link.getAttribute('href');
                log(`é€£çµ ${index + 1}: ${href}`);
            });

            const images = document.querySelectorAll('.logo-img');
            images.forEach((img, index) => {
                const src = img.getAttribute('src');
                log(`åœ–ç‰‡ ${index + 1}: ${src}`);
            });

            log('è·¯å¾‘è§£ææ¸¬è©¦å®Œæˆ');
        }

        // ç›£è½å°è¦½åˆ—è¼‰å…¥äº‹ä»¶
        window.addEventListener('load', function() {
            log('é é¢å®Œå…¨è¼‰å…¥');
        });
    </script>
</body>
</html>