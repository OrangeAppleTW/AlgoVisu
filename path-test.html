<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¯å¾‘æ¸¬è©¦ - æ¼”ç®—æ³•è¦–è¦ºåŒ–</title>
    <link rel="stylesheet" href="styles/styles.css">
    <style>
        body {
            margin: 0;
            padding: 80px 20px 20px 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #fafafa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }

        .test-result {
            font-family: monospace;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
            white-space: pre-wrap;
        }

        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #007bff; }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ GitHub Pages è·¯å¾‘æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>ğŸ“ ç•¶å‰é é¢è³‡è¨Š</h3>
            <div class="test-result" id="page-info"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ”— å°è¦½åˆ—è¼‰å…¥ç‹€æ…‹</h3>
            <div class="test-result" id="navbar-status">ç­‰å¾…è¼‰å…¥...</div>
            <button onclick="testNavbarLoader()">é‡æ–°æ¸¬è©¦å°è¦½åˆ—</button>
        </div>

        <div class="test-section">
            <h3>ğŸ  è·¯å¾‘è¨ˆç®—æ¸¬è©¦</h3>
            <div class="test-result" id="path-calculation"></div>
            <button onclick="testPathCalculation()">æ¸¬è©¦è·¯å¾‘è¨ˆç®—</button>
        </div>

        <div class="test-section">
            <h3>ğŸ–¼ï¸ åœ–ç‰‡è¼‰å…¥æ¸¬è©¦</h3>
            <div class="test-result" id="image-test"></div>
            <button onclick="testImagePaths()">æ¸¬è©¦åœ–ç‰‡è·¯å¾‘</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“„ é é¢é€£çµæ¸¬è©¦</h3>
            <div class="test-result" id="link-test"></div>
            <button onclick="testPageLinks()">æ¸¬è©¦é é¢é€£çµ</button>
        </div>
    </div>

    <script src="components/navbar-loader.js"></script>
    <script>
        // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºåŸºæœ¬è³‡è¨Š
        document.addEventListener('DOMContentLoaded', function() {
            displayPageInfo();
            
            // ç­‰å¾…å°è¦½åˆ—è¼‰å…¥å®Œæˆ
            setTimeout(() => {
                checkNavbarStatus();
            }, 1000);
        });

        function displayPageInfo() {
            const info = `ç•¶å‰ URL: ${window.location.href}
ç•¶å‰è·¯å¾‘: ${window.location.pathname}
ç•¶å‰ä¸»æ©Ÿ: ${window.location.host}
æ˜¯å¦ç‚º GitHub Pages: ${window.location.host.includes('github.io') ? 'æ˜¯' : 'å¦'}`;
            
            document.getElementById('page-info').textContent = info;
        }

        function checkNavbarStatus() {
            const navbar = document.querySelector('.navbar');
            const status = document.getElementById('navbar-status');
            
            if (navbar) {
                const links = navbar.querySelectorAll('a');
                const logoImg = navbar.querySelector('.logo-img');
                
                let result = 'âœ… å°è¦½åˆ—è¼‰å…¥æˆåŠŸ\n';
                result += `åŒ…å« ${links.length} å€‹é€£çµ\n`;
                
                if (logoImg) {
                    result += `Logo åœ–ç‰‡: ${logoImg.src}\n`;
                    result += `Logo è¼‰å…¥ç‹€æ…‹: ${logoImg.complete ? 'æˆåŠŸ' : 'å¤±æ•—'}`;
                } else {
                    result += 'âŒ Logo åœ–ç‰‡æœªæ‰¾åˆ°';
                }
                
                status.textContent = result;
                status.className = 'test-result success';
            } else {
                status.textContent = 'âŒ å°è¦½åˆ—è¼‰å…¥å¤±æ•—';
                status.className = 'test-result error';
            }
        }

        function testNavbarLoader() {
            const status = document.getElementById('navbar-status');
            status.textContent = 'ğŸ”„ é‡æ–°è¼‰å…¥å°è¦½åˆ—...';
            status.className = 'test-result info';
            
            // ç§»é™¤ç¾æœ‰å°è¦½åˆ—
            const existingNavbar = document.querySelector('.navbar');
            if (existingNavbar) {
                existingNavbar.remove();
            }
            
            // é‡æ–°è¼‰å…¥
            if (window.NavbarLoader) {
                new window.NavbarLoader();
                setTimeout(() => {
                    checkNavbarStatus();
                }, 500);
            } else {
                status.textContent = 'âŒ NavbarLoader æœªè¼‰å…¥';
                status.className = 'test-result error';
            }
        }

        function testPathCalculation() {
            const result = document.getElementById('path-calculation');
            
            if (window.NavbarLoader) {
                const loader = new window.NavbarLoader();
                const info = `åŸºç¤è·¯å¾‘: ${loader.basePath}
æ ¹ç›®éŒ„è·¯å¾‘: ${loader.rootPath}

è·¯å¾‘è¨ˆç®—é‚è¼¯:
1. æª¢æ¸¬æ˜¯å¦åŒ…å« '/AlgoVisu/'
2. è¨ˆç®—ç›¸å°è·¯å¾‘æ·±åº¦
3. ç”Ÿæˆç›¸å°è·¯å¾‘å­—ä¸²`;
                
                result.textContent = info;
                result.className = 'test-result success';
            } else {
                result.textContent = 'âŒ NavbarLoader æœªè¼‰å…¥';
                result.className = 'test-result error';
            }
        }

        function testImagePaths() {
            const result = document.getElementById('image-test');
            
            // æ¸¬è©¦ Logo åœ–ç‰‡
            const logoImg = document.querySelector('.logo-img');
            if (logoImg) {
                const testInfo = `Logo åœ–ç‰‡è·¯å¾‘: ${logoImg.src}
è¼‰å…¥ç‹€æ…‹: ${logoImg.complete ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}
è‡ªç„¶å¯¬åº¦: ${logoImg.naturalWidth}px
è‡ªç„¶é«˜åº¦: ${logoImg.naturalHeight}px`;
                
                result.textContent = testInfo;
                result.className = logoImg.complete ? 'test-result success' : 'test-result error';
            } else {
                result.textContent = 'âŒ æœªæ‰¾åˆ° Logo åœ–ç‰‡å…ƒç´ ';
                result.className = 'test-result error';
            }
        }

        function testPageLinks() {
            const result = document.getElementById('link-test');
            const links = document.querySelectorAll('.navbar a');
            
            if (links.length > 0) {
                let linkInfo = `æ‰¾åˆ° ${links.length} å€‹å°è¦½é€£çµ:\n\n`;
                
                links.forEach((link, index) => {
                    const href = link.getAttribute('href');
                    const text = link.textContent.trim();
                    linkInfo += `${index + 1}. ${text}: ${href}\n`;
                });
                
                result.textContent = linkInfo;
                result.className = 'test-result success';
            } else {
                result.textContent = 'âŒ æœªæ‰¾åˆ°ä»»ä½•å°è¦½é€£çµ';
                result.className = 'test-result error';
            }
        }
    </script>
</body>
</html>